Summary
====

This is the source code for the article "**Optimize rule mining based on constraint learning in knowledge graph**", which can be used for knowledge graph completion tasks. The submodule ckyrule is a simple ILP system that can learn rules for specific problems. However, these rules are discrete and cannot perform predicate creation.

## Dependencies

* `SWI-Prolog` version 8.4.3
* `Python` version 3.9.6
* `clingo` version 5.5.2
* `pyswip` version 0.2.11

Other dependencies are detailed in `requirements.txt`.

## Usage

After downloading the code, the first step is to unzip the dataset. Next, configure the required parameters in `config.py` and set the desired run mode in `main.py`. Finally, running `main.py` will commence the process. Some run mode parameters in `main.py` are as follows:

`new_model: bool`-> Whether to train a new embedding model

`new_enhance: bool`-> Whether to perform new data enhancement

`continue_mode: bool`-> Whether to use the continue mode (which may cause the program to exit abnormally in some cases; the continue mode can complete rules that have not been mined)

Additionally, the name of the rule repository generated by the program can be set in `main.py`. This will be saved as a folder under `/program/`.


## Reproducing the Results in the Paper

You may need to replicate the comparative experiment results from the paper; here are the parameter configurations from the paper:

### WN18

* `max_body` set to 3
* `max_specialize_body` set to 3
* `min_overlap_limit` set to 1e-3
* `min_coverage_limit` set to 1e-3
* `confidence_limit` set to 5e-3
* `min_rule_score_limit` set to 5e-3

### FB15K

* `max_body` set to 2
* `max_specialize_body` set to 2
* `min_overlap_limit` set to 1e-3
* `min_coverage_limit` set to 1e-3
* `confidence_limit` set to 0
* `min_rule_score_limit` set to 1e-3

### WN18RR

* `max_body` set to 4
* `max_specialize_body` set to 4
* `min_overlap_limit` set to 1e-7
* `min_coverage_limit` set to 1e-8
* `confidence_limit` set to 1e-3
* `min_rule_score_limit` set to 1e-3

### FB15K-237

* `max_body` set to 3
* `max_specialize_body` set to 3
* `min_overlap_limit` set to 0.5
* `min_coverage_limit` set to 1e-3
* `confidence_limit` set to 0
* `min_rule_score_limit` set to 1e-3

Furthermore, the "rule base generation module" was not utilized in the comparative experiment. Consequently, `is_enhance_dataset` is set to False. These configurations are not necessarily optimal for the four datasets but represent the outcomes that we considered superior during our exploratory process.

Additionally, the code includes a function `revamp(self, indicator, bad_rule_limit)` that can be used to rerun the code based on the specified indicator type `indicator` and the desired indicator value `bad_rule_limit`. This allows for adaptation to different types of relationships by adjusting hyperparameters accordingly, such as setting broader hyperparameters for small-sample relationships. If the new rule base shows slight improvements in the MRR metric, these rules will be updated and included in the final rule base.

## Publication

Refer to the following publication for details of the models and experiments.

- [Optimize rule mining based on constraint learning in knowledge graph](https://link.springer.com/chapter/10.1007/978-981-97-5498-4_7)

## Cite Ragger

If you use this package for published work, please cite the following:

    @InProceedings{10.1007/978-981-97-5498-4_7,
    author="Cai, Kaiyue
        and Wang, Xinzhi
        and Luo, Xiangfeng",
    editor="Cao, Cungeng
        and Chen, Huajun
        and Zhao, Liang
        and Arshad, Junaid
        and Asyhari, Taufiq
        and Wang, Yonghao",
    title="Optimize Rule Mining Based on Constraint Learning in Knowledge Graph",
    booktitle="Knowledge Science, Engineering and Management",
    year="2024",
    publisher="Springer Nature Singapore",
    address="Singapore",
    pages="82--98",
    isbn="978-981-97-5498-4"
    }
